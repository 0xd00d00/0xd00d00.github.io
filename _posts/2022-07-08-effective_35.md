---
layout: post
author: doodoo
title: "[Effective C++] ν•­λ© 41: ν…ν”λ¦Ώ ν”„λ΅κ·Έλλ°μ μ²λ¦ΏκΈΈλ„ μ•”μ‹μ 
μΈν„°νμ΄μ¤μ™€ μ»΄νμΌ νƒ€μ„ λ‹¤ν•μ„±"
subtitle: "ν…ν”λ¦Ώκ³Ό μΌλ°ν™” ν”„λ΅κ·Έλλ° π“"
date: 2022-07-08
cover: /assets/img/default.png
tags: Effective_C++ C++
sitemap :
 changefreq : daily
 priority : 1.0
---
μ•λ…•ν•μ„Έμ”! <span class="doodoo">λ‘λ‘μ½”λ”©</span> μ…λ‹λ‹¤ β‹ <br>
μ¤λμ€ Effective C++ ν•­λ© 41μ— λ€ν•΄ μ•μ•„λ³΄κ² μµλ‹λ‹¤.

π–‡ μ†μ¤μ½”λ“μ— λ§μ°μ¤λ¥Ό μ¬λ¦¬κ³  <span class="tip">copy</span> λ²„νΌμ„ λ„λ¥Ό κ²½μ° λ” μ‰½κ² λ³µμ‚¬ν•  μ μμµλ‹λ‹¤!

κ¶κΈν• μ , λ³΄μ•μ  λ‚¨κ²¨μ£Όμ‹λ©΄ μ„±μ‹¤ν λ‹µλ³€ν•κ² μµλ‹λ‹¤. π <br>
\+ κ°μƒν‰ λ“κΈ€λ΅ λ‚¨κ²¨μ£Όμ‹λ©΄ νμ΄λ©λ‹λ‹¤. π™‡

### λ…μ‹μ  μΈν„°νμ΄μ¤μ™€ μ•”μ‹μ  μΈν„°νμ΄μ¤
#### λ…μ‹μ  μΈν„°νμ΄μ¤
κ°μ²΄ μ§€ν–¥ ν”„λ΅κ·Έλλ°μ μ„Έκ³„λ¥Ό μ›€μ§μ΄λ” μ¶•μ„ λ‚λ„μλ©΄, *λ…μ‹μ  μΈν„°νμ΄μ¤*μ™€ *λ°νƒ€μ„ λ‹¤ν•μ„±*μ΄λ‹¤.

```cpp
class Widget {
  public:
    Widget() {};
    virtual ~Widget();
    virtual std::size_t size() const;
    virtual void normalize();
    void swap(Widget& other);
    ...
};

void doProcessing(Widget& w)
{
  if (w.size() > 10 && w !=someNastyWidget) {
    Widget temp(w);
    temp.normalize();
    temp.swap(w);
  }
}
```

μ„ μ½”λ“λ” μ°λ¦¬κ°€ κ°μ²΄μ§€ν–¥μ—μ„ μΌλ°μ μΌλ΅ μ‚¬μ©ν•λ” μ½”λ“μ΄λ‹¤.

- `w` κ°™μ€ κ²½μ° `Widget` νƒ€μ…μΌλ΅ μ„ μ–Έλμ–΄μ Έ μκΈ° λ•λ¬Έμ— `Widget`κ³Ό κ΄€λ ¨λ μΈν„°νμ΄μ¤λ¥Ό μ§€μ›ν•΄μ•Όν•λ‹¤. ν•΄λ‹Ή μΈν„°νμ΄μ¤ κ°™μ€ κ²½μ° "μ†μ¤μ½”λ“" λ¥Ό ν†µν•΄ μ°ΎμΌλ©΄ μ–΄λ–¤ ν•νƒμΈμ§€ μ• μ μλ‹¤. μ΄μ™€ κ°™μ΄ "μ†μ¤μ½”λ“" λ¥Ό ν†µν•΄ μ• μ μλ” μΈν„°νμ΄μ¤λ¥Ό μ°λ¦¬λ” *λ…μ‹μ  μΈν„°νμ΄μ¤*λΌκ³  λ¶€λ¥Έλ‹¤.

- λν•, `Widget` λ‚΄λ¶€μ— `virtual`λ΅ κµ¬μ„±λ ν•¨μλ“¤ μ¦‰, κ°€μƒν•¨μλ“¤ κ°™μ€ κ²½μ° λ°νƒ€μ„ μ‹μ μ— *virtual table*λ¥Ό ν™•μΈν•΄ λ§µν•‘λλ” κµ¬μ΅°λ΅ μ΄λ£¨μ–΄μ§„λ‹¤. μ΄μ™€ κ°™μ€ νΈμ¶μ„ *λ°νƒ€μ„ λ‹¤ν•μ„±*μ— μν•΄ μ΄λ£¨μ–΄μ§„λ‹¤κ³  λ§ν•λ‹¤.

#### μ•”μ‹μ  μΈν„°νμ΄μ¤
ν…ν”λ¦Ώ μΌλ°ν™” ν”„λ΅κ·Έλλ°μ μ„Έκ³„μ—μ„λ” λ…μ‹μ  μΈν„°νμ΄μ¤μ™€ λ°νƒ€μ„ λ‹¤ν•μ„±μ΄ μ΅΄μ¬ν•κΈ΄ ν•μ§€λ§, λ” μ¤‘μ”ν• κ°λ…μ΄ λ“±μ¥ν•λ‹¤. λ°”λ΅ *μ•”μ‹μ  μΈν„°νμ΄μ¤* μ™€ *μ»΄νμΌ λ‹¤ν•μ„±* μ΄λ‹¤.

```cpp
template<typename T>
void doProcessing(T& w)
{
  if (w.size() > 10 && w != someNastyWidget) {
    T temp(w);
    temp.normalize();
    temp.swap(w);
  }
}
```

μ„μ™€ κ°™μ΄ μ†μ¤μ½”λ“κ°€ μ‘μ„±λμ–΄μ§ κ²½μ° `w`μ— λ€ν•΄μ„ μ–΄λ–»κ² λ§ν•  μ μμ„κΉ?

- `w`λ” T νƒ€μ…μΌλ΅ μ§€μ›ν•΄μ•Όλλ” μΈν„°νμ΄μ¤λ” `size` `normalize` `swap`κ³Ό κ°™μ€ λ©¤λ²„ν•¨μλ“¤μ΄λ‹¤. λΏλ§μ•„λ‹λΌ λ¶€λ“±μ—°μ‚°μ λ€μ…μ—°μ‚°μλ¥Ό μ§€μ›ν•΄μ•Όλλ‹¤. μ΄λ¥Ό λ§μ΅±ν•΄μ•Ό μ»΄νμΌμ— λ¬Έμ μ—†μ΄ λ™μ‘ν•λ‹¤. μ¦‰, ν…ν”λ¦Ώμ΄ μ λ€λ΅ λ™μ‘ν•λ ¤λ©΄ λ‡ κ°μ μΈν„°νμ΄μ¤λ¥Ό μ§€μ›ν•΄μ•Όλκ³ , μ΄ ν‘ν„μ‹λ“¤μ„ Tκ°€ μ§€μ›ν•΄μ•Όν•λ” *μ•”μ‹μ  μΈν„°νμ΄μ¤*λΌκ³  λ¶€λ¥Έλ‹¤.

- `w`κ°€ μλ°ν•κ³  μλ” ν•¨μλ¥Ό νΈμ¶ν•  κ²½μ° νΈμ¶μ„ μ„±κ³µμ‹ν‚¤κΈ° μ„ν•΄ "ν…ν”λ¦Ώ μΈμ¤ν„΄μ¤ν™”" λ™μ‘μ΄ μΌμ–΄λ‚λ‹¤. μ΄λ¬ν• μΈμ¤ν„΄μ¤ν™”κ°€ μΌμ–΄λ‚λ” μ‹μ μ΄ *μ»΄νμΌ λ„μ¤‘*μ΄λ‹¤. μΈμ¤ν„΄μ¤ν™”λ¥Ό μ§„ν–‰ν•λ” ν•¨μ ν…ν”λ¦Ώμ— μ–΄λ–¤ ν…ν”λ¦Ώ λ§¤κ°λ³€μκ°€ λ“¤μ–΄κ°€λλƒμ— λ”°λΌμ„ νΈμ¶λλ” ν•¨μκ°€ λ‹¬λΌμ§„λ‹¤. μ΄λ¥Ό κ°€λ¦¬μΌ *μ»΄νμΌ νƒ€μ„ λ‹¤ν•μ„±*μ΄λΌκ³  λ¶€λ¥Έλ‹¤.

μ•”μ‹μ  μΈν„°νμ΄μ¤ κ°™μ€ κ²½μ°, μ–΄λ–¤ μ†μ¤μ½”λ“λ¥Ό μ°Έμ΅° (μ¦‰, ν•¨μμ μ‹κ·Έλ‹μ² κΈ°λ°)ν•μ§€ μ•κ³  μ ν¨ν‘ν„μ‹μ— μ¤‘μ μ„ λ‘”λ‹¤λ” μ μ—μ„ λ…μ‹μ  μΈν„°νμ΄μ¤μ™€ μ°¨μ΄λ¥Ό μ΄λ£¬λ‹¤.

```cpp
{
  if (w.size() > 10 && w != someNastyWidget) {
    ...
  }
}
```

*μ•”μ‹μ  μΈν„°νμ΄μ¤*μ νΉμ§•μ€ ν‘ν„μ‹μ„ κΈ°λ°μΌλ΅ ν•κ³  μλ‹¤λ” μ μ΄λ‹¤. ν‘ν„μ‹λ§ λ§μ΅±ν•λ©΄ λλ”λ°, `if` κµ¬λ¬Έμ— λ“¤μ–΄κ°€λ” `bool` νƒ€μ…μ„ λ§μ¶”λ„λ΅ ν•λ©΄ λλ‹¤. μ¦‰, "w.size() > 10 && w != someNastyWidget" ν•΄λ‹Ή κ°’μ΄ `bool` νƒ€μ…μ„ λ§μ΅±μ‹ν‚¬ μ μκ² νΈν™μ„±μ„ μ κ³µν•λ©΄ λλ‹¤λ” μ μ΄λ‹¤. κµ¬μ²΄μ μΌλ΅ μΈν„°νμ΄μ¤κ°€ μ–΄λ–¤μ‹μΌλ΅ κµ¬μ¶•λμ–΄μ Έ μμ–΄μ•Όν•λ‹¤κ³  λ…μ‹ν•μ§€ μ•λ”λ‹¤λ” κ²ƒμ΄ ν° μ¥μ μ΄λΌκ³  λ³΄λ©΄ λλ‹¤.

μ΅°κΈ λ” κµ¬μ²΄μ μΌλ΅ μλ¥Όλ“¤μ–΄, `size()` κ°™μ€ κ²½μ° `10`μ΄λΌλ” `int` κ°’κ³Ό λΉ„κµλ¥Ό ν•κ³  μλ‹¤. κ·Έλ ‡λ‹¤κ³  ν•΄μ„ `size()` μΈν„°νμ΄μ¤κ°€ λ¬΄μ΅°κ±΄ `int`λ¥Ό λ°ν™ν•΄μ•Όλλλƒ κ·Έκ±΄μ•„λ‹λ‹¤. `operator>` μ—°μ‚°μλ¥Ό μ¬μ •μν•΄ `int` νƒ€μ…μ„ λ°›μ•„μ„ `bool` νƒ€μ…μΌλ΅ λ°ν™ν•κ² λ§λ“¤κΈ°λ§ ν•λ©΄ λλ‹¤.

*μ•”μ‹μ  μΈν„°νμ΄μ¤*λ¥Ό κµ¬ν„ν•  λ• μ£Όμν•  μ μ€ μ–΄λ–¤ ν…ν”λ¦Ώ μ•μ—μ„ μ–΄λ–¤ κ°μ²΄λ¥Ό μ‚¬μ©ν•λ ¤κ³  ν•  λ• κ·Έ ν…ν”λ¦Ώμ—μ„ μ”κµ¬ν•λ” μ•”μ‹μ  μΈν„°νμ΄μ¤λ¥Ό κ·Έ κ°μ²΄κ°€ μ§€μ›ν•μ§€ μ•μ„ κ²½μ° μ‚¬μ©μ΄ λ¶κ°€λ¥ν•λ‹¤λ” μ μ„ μ£Όμν•΄μ•Όν•λ‹¤. ( μ»΄νμΌμ΄ μ•„μ μ•λ  κ²ƒ.. )

### To Sum up
- ν΄λμ¤ λ° ν…ν”λ¦Ώμ€ λ¨λ‘ μΈν„°νμ΄μ¤μ™€ λ‹¤ν•μ„±μ„ μ§€μ›ν•λ‹¤

- ν΄λμ¤μ κ²½μ°, μΈν„°νμ΄μ¤λ” λ…μ‹μ μ΄λ©° ν•¨μμ μ‹κ·Έλ‹μ²μ— μ¤‘μ μ„ λ‘”λ‹¤. λ‹¤ν•μ„±μ€ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘ κ°€μƒν•¨μλ¥Ό ν†µν•΄ λ‚νƒ€λ‚λ‹¤.

- ν…ν”λ¦Ώ κ°™μ€ κ²½μ°, μΈν„°νμ΄μ¤λ” μ•”μ‹μ μ΄λ©°, μ ν¨ ν‘ν„μ‹μ— κΈ°λ°μ„ λ‘μ–΄ κµ¬μ„±ν•λ‹¤. λ‹¤ν•μ„±μ€ μ»΄νμΌ μ¤‘μ— ν…ν”λ¦Ώ μΈμ¤ν„΄μ¤ν™”μ™€ ν•¨μμ μ¤λ²„λ΅λ”© λ¨νΈμ„± ν•΄κ²°μ„ ν†µν•΄ λ‚νƒ€λ‚λ‹¤.

