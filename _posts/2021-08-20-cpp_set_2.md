---
layout: post
author: doodoo
title: "[C++][Data Structure] std::set ì»¨í…Œì´ë„ˆ (2)"
subtitle: "C++ set ìë£Œêµ¬ì¡° ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ìğŸ˜š"
date: 2021-08-20
cover: /assets/img/cpp_set.png
tags: C++ Data_Structure
sitemap :
 changefreq : daily
 priority : 1.0
---
ì•ˆë…•í•˜ì„¸ìš”! <span class="doodoo">ë‘ë‘ì½”ë”©</span> ì…ë‹ˆë‹¤ âœ‹ <br>
ì˜¤ëŠ˜ì€ Setì˜ ìë£Œêµ¬ì¡°ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

[ì´ì „ í¬ìŠ¤íŒ…](https://0xd00d00.github.io/2021/08/16/cpp_set.html)ì„ ì°¸ê³ í•˜ì‹œë©´ ë” ì´í•´ê°€ í¸í•©ë‹ˆë‹¤!

ğŸ–‡ ì†ŒìŠ¤ì½”ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ê³  <span class="tip">copy</span> ë²„íŠ¼ì„ ëˆ„ë¥¼ ê²½ìš° ë” ì‰½ê²Œ ë³µì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

ê¶ê¸ˆí•œ ì , ë³´ì•ˆì  ë‚¨ê²¨ì£¼ì‹œë©´ ì„±ì‹¤íˆ ë‹µë³€í•˜ê² ìŠµë‹ˆë‹¤. ğŸ˜ <br>
\+ ê°ìƒí‰ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ í˜ì´ë©ë‹ˆë‹¤. ğŸ™‡

### ì¤‘ë³µëœ ê°’ì„ ì‚½ì…í•  ê²½ìš°
Set ê°™ì€ ê²½ìš° ê³ ìœ í•œ ê°’ì„ íŠ¹ì •í•œ ìˆœì„œì— ë”°ë¼ ì €ì¥í•˜ëŠ” ì»¨í…Œì´ë„ˆì´ë‹¤. *ê³ ìœ í•œ ê°’*ì´ ë“¤ì–´ì˜¨ë‹¤ëŠ” ì „ì œê°€ ìˆì§€ë§Œ, ë§Œì•½ ê°œë°œìê°€ ë™ì¼í•œ ê°’ì„ ì…ë ¥í–ˆì„ ë•Œ ì–´ë–»ê²Œ ë ê¹Œ?

ê²°ë¡ ì ìœ¼ë¡œëŠ” *ì•„ë¬´ì¼ë„ ì¼ì–´ë‚˜ì§€* ì•ŠëŠ”ë‹¤ğŸ˜µ

`set` ë‚´ë¶€ì—ì„  ì–´ë–»ê²Œ ì²˜ë¦¬í• ì§€ ì•Œì•„ë³´ì.

![set_dup](/assets/img/set_dup.png)

ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì´, `set` ì—ì„œëŠ” ë°ì´í„°ë¥¼ ì‚½ì…í•  ë•Œ, í•˜ë‚˜ì˜ pair í˜•íƒœë¡œ ë°˜í™˜í•œë‹¤. `pair`ì˜ ì²«ë²ˆì§¸ ê°’ì€ í•´ë‹¹ ìœ„ì¹˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë°˜ë³µìì´ê³ , ë‘ ë²ˆì§¸ ì¸ì ê°’ì€ ì‚½ì… ì„±ê³µìœ ë¬´ë¥¼ íŒë‹¨í•˜ëŠ” `bool` ë³€ìˆ˜ì´ë‹¤.

```cpp
#include <iostream>
#include <set>

using namespace std;

int main()
{
	set<int> s;
	s.insert(30);
	s.insert(40);
	s.insert(20);
	s.insert(10);
	s.insert(45);
	s.insert(25);

	// ë™ì¼í•œ ê°’ì„ ë„£ì—ˆì„ ë•Œ
	auto ret = s.insert(20);

	// ë‘ë²ˆì§¸ ì¸ìë¡œ ì„±ê³µìœ ë¬´ íŒë‹¨.
	// ì‹¤íŒ¨ë¼ëŠ” ê²ƒì€ ì¤‘ë³µëœ ê°’ì´ë¼ëŠ” ê²ƒ.
	if (ret.second == false)
			cout << "duplicated value" << endl;

}
```

ìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼, ê°’ì´ ë™ì¼í•˜ê²Œ ë“¤ì–´ì˜¬ ê²½ìš°, ë°˜í™˜ ê°’ì„ ë°›ì•„ ë‘ë²ˆì§¸ ê°’ìœ¼ë¡œ í™•ì¸í•´ë³´ë©´, ì¤‘ë³µ ìœ ë¬´ë¥¼ íŒë‹¨í•  ìˆ˜ ìˆë‹¤.

```cpp
auto ret = s.insert(20);

// ì›ë˜ í˜•íƒœ
pair<set<int>::iterator, bool> ret = s.insert(20);
```

ìœ„ì˜ ì½”ë“œì—ì„œ ë³´ì´ëŠ” ê²ƒê³¼ ê°™ì´, ì›ë˜ í˜•íƒœëŠ” ë³µì¡í•˜ë‹¤. ë”°ë¼ì„œ, ê°„ë‹¨í•˜ê²Œ `auto`ë¡œ ì“°ê³ , ì›í˜•ì„ í•œë²ˆ ëˆˆì— ìµíˆë„ë¡ í•˜ì.

### ì¤‘ë³µëœ ê°’ì„ í—ˆìš©í•˜ëŠ” set
ê·¸ë ‡ë‹¤ë©´ `set`ì—ì„œëŠ” ì¤‘ë³µëœ ê°’ì„ ë„£ì„ ìˆ˜ ì—†ì„ê¹Œ?

`set`ìë£Œêµ¬ì¡°ê°€ì•„ë‹Œ `multiset` ìë£Œêµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ë³µì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ìœ„ì˜ ì½”ë“œë¥¼ `multiset`ìœ¼ë¡œ ë³€ê²½í•´ë³´ì.

```cpp
#include <iostream>
#include <set>

using namespace std;

int main()
{
	// set -> multisetìœ¼ë¡œ ë³€ê²½
	// set<int> s;
	multiset<int> s;
	s.insert(30);
	s.insert(40);
	s.insert(20);
	s.insert(10);
	s.insert(45);
	s.insert(25);

	// ë™ì¼í•œ ê°’ì„ ë„£ì—ˆì„ ë•Œ
	auto ret = s.insert(20);

	// multiset ì¼ê²½ìš° ì¤‘ë³µëœ ê°’ì´ ë¬´ì¡°ê±´ ë“¤ì–´ê°€ê¸°ë•Œë¬¸ì—
	// ì„±ê³µìœ ë¬´ë¥¼ íŒë‹¨í•  í•„ìš”ê°€ ì—†ë‹¤.
	// if (ret.second == false)
	//		cout << "duplicated value" << endl;

	auto p = begin(s);

	while( p != end(s) )
	{
		cout << *p << endl;
		++p;
	}
}
```

ìœ„ì˜ ì½”ë“œì™€ ê°™ì´, `set`ì„ `multiset`ìœ¼ë¡œ ë³€ê²½í•´ì„œ ì‚¬ìš©í•´ë³´ì. ì¤‘ìš”í•œ íŠ¹ì§•ì€ `multiset`ê°™ì€ ê²½ìš° ì¤‘ë³µëœ ê°’ì„ ë¬´ì¡°ê±´ í—ˆìš©í•˜ê¸° ë•Œë¬¸ì—, `set`ê³¼ ë‹¬ë¦¬ pairí˜•ì‹ìœ¼ë¡œ ë°˜í™˜ê°’ì„ ì „ë‹¬ë°›ëŠ” ê²ƒì´ ì•„ë‹Œ `iterator`ë§Œ ì „ë‹¬ë°›ëŠ”ë‹¤.

ë”°ë¼ì„œ, `second`ë¡œ ì¤‘ë³µ ìœ ë¬´ë¥¼ ê²€ì‚¬í•˜ëŠ” ë¶€ë¶„ì„ ì£¼ì„ìœ¼ë¡œ ë§‰ê³  í…ŒìŠ¤í‹€í•´ì•¼í•œë‹¤.

### ì‚¬ìš©ì ì •ì˜ íƒ€ì…ì„ setì— ë„£ê¸°
ìš°ë¦¬ëŠ” í”„ë¡œê·¸ë¨ì„ ê°œë°œí•˜ë©´ì„œ ê¸°ë³¸ ë°ì´í„° íƒ€ì…ë§Œ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì•„ë‹ˆë¼, ë•Œë¡  ì‚¬ìš©ì ì •ì˜ íƒ€ì… (class)ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ `set`ì€ ì‚¬ìš©ì ì •ì˜ íƒ€ì…ì´ ìˆëŠ”ì§€ë„ ì•Œì§€ ëª»í•œë‹¤.

ì•„ë˜ì˜ ì˜ˆì‹œë¥¼ í†µí•´ ì•Œì•„ë³´ì.

```cpp
#include <iostream>
#include <set>

using namespace std;

struct Point
{
	int x,y;
	Point(int a = 0, int b = 0) : x(a), y(b) {}
};

int main()
{
	set<Point> s;

	s.insert(Point(1,1));
	s.insert(Point(2,2));
	s.insert(Point(3,3));
}
```

ìœ„ì˜ ì½”ë“œë¥¼ ìˆ˜í–‰í–ˆì„ ë•Œ, `set`ì—ì„œëŠ” ì‚¬ìš©ì ì •ì˜ íƒ€ì…ì„ ì•Œì§€ëª»í•˜ëŠ” ìƒíƒœì—ì„œ ë¹„êµí•œë‹¤. ì‚¬ì‹¤ `set`ì—ì„œëŠ” ì–´ë–»ê²Œ ë¹„êµë¥¼ í•´ì•¼í•˜ëŠ”ì§€ë„ ëª°ë¼ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ ì¶œë ¥í•œë‹¤.

```text
...
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/v1/set:675:25: note: in instantiation of member function 'std::__1::__tree<Point, std::__1::less<Point>, std::__1::allocator<Point>>::__insert_unique' requested here
        {return __tree_.__insert_unique(_VSTD::move(__v));}
                        ^
set.cc:16:4: note: in instantiation of member function 'std::__1::set<Point, std::__1::less<Point>, std::__1::allocator<Point>>::insert' requested here
        s.insert(Point(1,1));
          ^
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/v1/utility:592:1: note: candidate template ignored: could not match 'pair<type-parameter-0-0, type-parameter-0-1>' against 'const Point'
operator< (const pair<_T1,_T2>& __x, const pair<_T1,_T2>& __y)
^
1 error generated.
```

ì´ëŸ° `set`ìë£Œêµ¬ì¡°ì— ì‚¬ìš©ì ì •ì˜ íƒ€ì…ì„ ë„£ìœ¼ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

í•´ê²°í•˜ëŠ” ë°©ë²•ì€ *í•¨ìˆ˜ ê°ì²´ ì œê³µ* ê³¼ *< ì—°ì‚°ì ì¬ì •ì˜* ë‘ ê°€ì§€ë¥¼ í™œìš©í•˜ë©´ ëœë‹¤.

*ğŸŒ± í•¨ìˆ˜ ê°ì²´ ì œê³µ*

í•¨ìˆ˜ ê°ì²´ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì€ *í…œí”Œë¦¿ ë‹¨ìœ„ì „ëµ íŒ¨í„´*ì„ í™œìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ, `set`ì—ì„œ í•´ë‹¹ íƒ€ì…ì„ ë¹„êµí•  ë•Œ, ë‚´ê°€ ì „ë‹¬í•œ ë¹„êµí•¨ìˆ˜ë¡œ í•´ì¤˜~ ë¼ê³  ìš”ì²­í•˜ëŠ” ê²ƒì´ë‹¤.

```cpp
// í•¨ìˆ˜ ê°ì²´ ë§Œë“¤ê¸°
struct Pointless
{
	// í¸ì˜ìƒ xë§Œ ë¹„êµí•©ë‹ˆë‹¤.
	bool operator()(const Point& p1, const Point& p2) const
	{
		return p1.x < p2.x;
	}
};

int main()
{
	set<Point, Pointless> s;

	s.insert(10);
	...
}
```

ìœ„ì˜ ì½”ë“œì™€ ê°™ì´, `Pointless` í•¨ìˆ˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´, `set`ì˜ ë‘ë²ˆì§¸ ì¸ìë¡œ ë„˜ê²¨ì£¼ê²Œ ë˜ë©´ ëœë‹¤. `set`ì€ ë‘ë²ˆì§¸ ì¸ìë¥¼ ì „ë‹¬ë°›ì•„ í•´ë‹¹ ë¹„êµ ê°ì²´ë¥¼ í†µí•´ ë¹„êµí•˜ë„ë¡ í•œë‹¤.


*ğŸŒ± < ì—°ì‚°ì ì¬ì •ì˜*

ìœ„ì˜ ë°©ë²•ë³´ë‹¤ ë” ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤. ë°”ë¡œ *< ì—°ì‚°ì* ë¥¼ ì¬ì •ì˜í•´ë‘ë©´ `set`ì´ ì•Œì•„ì„œ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.

```cpp
struct Point
{
	int x,y;
	Point(int a = 0, int b = 0) : x(a), y(b) {}

	// < ì—°ì‚°ì ì¬ì •ì˜
	// í¸ì˜ìƒ x ê°’ë§Œ ë¹„êµ
	bool operator<(const Point& p) const
	{
		return x < p.x;
	}
};
```

ìœ„ì™€ ê°™ì´, ì‚¬ìš©ì ì •ì˜ íƒ€ì…ì— `operator<`ë¥¼ ë„£ì–´ë‘˜ ê²½ìš° `set`ì€ ìë™ì ìœ¼ë¡œ ë¹„êµí•  ìˆ˜ ìˆë‹¤.

### ì‚¬ìš©ì ì •ì˜ íƒ€ì… ìƒë“±ì—°ì‚°
ê·¸ë ‡ë‹¤ë©´ ìš°ë¦¬ëŠ” `set`ì„ ì˜ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì–´ë–¤ ë¹„êµì—°ì‚°ë“¤ì„ ì œê³µí•´ì•¼í• ê¹Œ?

ë‹¹ì—°íˆ `insert()`ë¥¼ ìœ„í•´ `< ì—°ì‚°ì` ì™€ `> ì—°ì‚°ì` ë‘ê°œë¥¼ *í•¨ìˆ˜ ê°ì²´*ë‚˜ *ì—°ì‚°ì ì¬ì •ì˜*ë¡œ ì œê³µí•´ì•¼í•œë‹¤.

ë§Œì•½ ìš°ë¦¬ê°€ ë™ì¼í•œ ê°’ì„ ì…ë ¥í•˜ê±°ë‚˜ `find()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ `==` ì—°ì‚°ì„ ì œê³µí•´ì•¼í• ê¹Œ? ìƒê°í•´ë³´ìğŸ¤”

ê²°ë¡ ì ìœ¼ë¡œëŠ” *"==" ì—°ì‚°ìëŠ” ì œê³µí•  í•„ìš”ê°€ ì—†ë‹¤* ì´ë‹¤.

`set` ë‚´ë¶€ì ìœ¼ë¡œëŠ” ìƒë“±ì„ ì¡°ì‚¬í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

```cpp
// set ë‚´ë¶€ ê³¼ì • ê°„ëµí™”
if (newelem < oldelem) left
else if (oldelem < newelem) right
else // ëª¨ë‘ ê°™ë‹¤ê³  íŒë‹¨..
```

ìœ„ì˜ ì½”ë“œëŠ” *ìƒë“±*ì„ êµ¬í•˜ëŠ” ë¶€ë¶„ì„ ê°„ëµí™”í•œ ê²ƒì´ë‹¤. `set` ë‚´ë¶€ì—ì„œëŠ” "<" ì—°ì‚°ê³¼ ">" ì—°ì‚°ì„ í†µí•´ ë¹„êµë¥¼ í•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” ìƒë“±ìœ¼ë¡œ ì·¨ê¸‰í•˜ê¸° ë•Œë¬¸ì— `==` ì—°ì‚°ì€ êµ³ì´ í•„ìš”í•˜ì§€ê°€ ì•Šë‹¤.

`==` ì—°ì‚°ì€ ë§Œë“¤ì–´ë„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì„ ê¸°ì–µí•˜ì!
