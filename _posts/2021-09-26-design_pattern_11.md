---
layout: post
author: doodoo
title: "[Design Pattern][C++] Decorator Pattern"
subtitle: "ë™ì ì¸ ë³€í™”ì— í•„ìš”í•œ decorator patternì— ëŒ€í•´ ì•Œì•„ë³´ì â—"
date: 2021-09-26
cover: /assets/img/default.png
tags: Design_Pattern C++
sitemap :
 changefreq : daily
 priority : 1.0
---
ì•ˆë…•í•˜ì„¸ìš”! <span class="doodoo">ë‘ë‘ì½”ë”©</span> ì…ë‹ˆë‹¤ âœ‹ <br>
ì˜¤ëŠ˜ì€ ë””ìì¸ íŒ¨í„´ ì¤‘ Decorator íŒ¨í„´ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

ğŸ–‡ ì†ŒìŠ¤ì½”ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ê³  <span class="tip">copy</span> ë²„íŠ¼ì„ ëˆ„ë¥¼ ê²½ìš° ë” ì‰½ê²Œ ë³µì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

ê¶ê¸ˆí•œ ì , ë³´ì•ˆì  ë‚¨ê²¨ì£¼ì‹œë©´ ì„±ì‹¤íˆ ë‹µë³€í•˜ê² ìŠµë‹ˆë‹¤. ğŸ˜ <br>
\+ ê°ìƒí‰ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œë©´ í˜ì´ë©ë‹ˆë‹¤. ğŸ™‡

### Decorator íŒ¨í„´
Decorator íŒ¨í„´ì€ ì–¸ì œ ì‚¬ìš©í• ê¹Œ?

*ë™ì ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ì•¼ë˜ëŠ” ìƒí™©*ì—ì„œ í•´ë‹¹ íŒ¨í„´ì„ ì‚¬ìš©í•œë‹¤.

ì–´ë–¤ ìƒí™©ì—ì„œ ì‚¬ìš©í•˜ëŠ”ì§€ ì˜ˆì œë¥¼ í†µí•´ ì•Œì•„ë³´ê³  íŒ¨í„´ì„ ì ìš©í•´ë³´ì.

### ìš°ì£¼ì„  ê²Œì„ì„ ë§Œë“¤ì
ì•„ë˜ì˜ ê·¸ë¦¼ê³¼ ê°™ì´, ìš°ì£¼ì„  ê²Œì„ì„ ë§Œë“ ë‹¤ê³  ìƒê°í•´ë³´ì. ìš°ì£¼ì„ ì„ ê°€ì§€ê³  ë¯¸ì‚¬ì¼ì„
ì´ ëª©í‘œë¬¼ì„ ë§ì¶”ëŠ” ê²Œì„ì´ë‹¤.

![space](/assets/img/space.png)

ìœ„ë¥¼ ì½”ë“œë¡œ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```cpp
#include <iostream>
using namespace std;

class Space {
	int color;
	int speed;
public:
	void Shoot() { cout << "Space ---------- target" << endl; }
};

int main() {
	Space s;
	s.Shoot();
}
```

ê·¸ëŸ°ë° ë§Œì•½ ìš°ì£¼ì„  ê²Œì„ì„ í•˜ëŠ” ê³¼ì •ì—ì„œ ë ˆë²¨ì—…ì„ í–ˆì„ ë•Œ, ì™¼ìª½, ì˜¤ë¥¸ìª½ í˜¹ì€ ë‘˜ ë‹¤ë¥¼ ê³µê²©í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì„ í„°ë“í–ˆë‹¤ê³  ê°€ì •í•´ë³´ì.

![space_upgrade](/assets/img/upgrade_space.png)

ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì´ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?

í•´ë‹¹ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” *ê¸°ì¡´ ë™ì‘ì€ ìˆ˜í–‰í•˜ê³ , ìƒˆë¡œìš´ ë™ì‘ì´ ì¶”ê°€ë˜ëŠ”
ê²ƒ*ì´ë‹¤.

ìš°ë¦¬ëŠ” [ì´ì „ í¬ìŠ¤íŒ…](https://0xd00d00.github.io/2021/08/06/design_pattern_4.html)ì„ í†µí•´ ìƒˆë¡œìš´ ë™ì‘ì´ ì¶”ê°€ë  ê²½ìš° ê³ ë ¤í•´ì•¼í•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²• *ìƒì†*ê³¼ *êµ¬ì„±*ë°©ë²•ì— ëŒ€í•´ ì–¸ê¸‰í–ˆë‹¤.

ë‘ ê°€ì§€ ë°©ë²•ì„ í†µí•´ êµ¬í˜„í•´ë³´ê³  ì–´ë–¤ ë°©ë²•ì´ ë” íš¨ìœ¨ì ì¸ì§€ ì•Œì•„ë³´ì.

### ìƒì†ì„ í†µí•œ ìš°ì£¼ì„  ê¸°ëŠ¥ ì¶”ê°€
ê¸°ì¡´ ê¸°ëŠ¥ì„ ê°–ê³  ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ë•Œ, ê°€ì¥ ë¨¼ì € ë– ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ë°©ë²•ì€*ìƒì†*ì´ë‹¤.

ë§Œì•½ ìš°ë¦¬ê°€ ìƒì†ì„ `LeftMissile`ì„ ì‚¬ìš©í•˜ëŠ” ìš°ì£¼ì„ ì„ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´, `Space`ë¥¼
ìƒì†ë°›ì•„ ë§Œë“¤ê³  `LeftMissile`ë¥¼ í™œìš©í•´ ì  ê²½ìš° ê¸°ë°˜ í´ë˜ìŠ¤ì˜ `Shoot()`ë¥¼
í˜¸ì¶œí•´ì£¼ê³  ìƒˆë¡œìš´ ë¯¸ì‚¬ì¼ì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ë©´ ëœë‹¤. ì•„ë˜ì˜ ì½”ë“œë¥¼ ë³´ì.

```cpp
#include <iostream>
using namespace std;

class Space {
  int color;
  int speed;
public:
  void Shoot() { cout << "Space ---------- target" << endl; }
};

// ì™¼ìª½ ë¯¸ì‚¬ì¼
class LeftMissile : public Space
{
public:
  void Shoot()
  {
      Space::Shoot(); // ê¸°ì¡´ ê¸°ëŠ¥ ìˆ˜í–‰.
      cout << "Left Missile : >>>>>>>>" << endl;
  }
};

int main() {
  Space s;
  s.Shoot();

	LeftMissile lm;
	lm.Shoot();
}
```

ìœ„ì™€ ê°™ì´ êµ¬ì¶•í•˜ë©´ ë  ê²ƒ ê°™ë‹¤. ì¦‰, ë ˆë²¨ì´ ì—†ê·¸ë ˆì´ë“œ ë  ê²½ìš° `LeftMissile lm;` ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë¯¸ì‚¬ì¼ì„ ì˜ë„ë¡ í•˜ë©´ ì•„ë¬´ ë¬¸ì œì—†ì´ ë™ì‘í•œë‹¤.

ê·¸ë ‡ë‹¤ë©´ í•´ë‹¹ ì½”ë“œê°€ ì •ë§ ì•„ë¬´ ë¬¸ì œê°€ ì—†ì„ê¹Œ?

ë§Œì•½ ìš°ë¦¬ê°€ ê²Œì„ì„ í•˜ëŠ” ì¤‘ì— *ì•„ì´í…œ*ì„ íšë“í•˜ì—¬, ìš°ì£¼ì„  ìƒ‰ì„ ë³€ê²½í–ˆë‹¤ê³ 
ê°€ì •í•´ë³´ì. *ì•„ì´í…œ*ì„ íšë“í•´ ìƒ‰ì´ ë³€í•œ ìš°ì£¼ì„ ì´ ë ˆë²¨ì—…ì„ í•´ì„œ ì™¼ìª½ìœ¼ë¡œ
ë¯¸ì‚¬ì¼ì„ ì˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•´ì•¼ëœë‹¤ê³  í•œë‹¤ë©´, í•´ë‹¹ ì½”ë“œëŠ” ì–´ë–»ê²Œ ë™ì‘í•  ê²ƒì¸ê°€?

![space_pic](/assets/img/space_pic.png)

ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì´, ë ˆë²¨ì„ ì—…ê·¸ë ˆì´ë“œ í•´ì„œ ë¯¸ì‚¬ì¼ì´ ì¶”ê°€ë  ê²½ìš° ìƒˆë¡œìš´ ê°ì²´ë¥¼
ìƒì„±í•´ ë§Œë“¤ê¸° ë•Œë¬¸ì— ê¸°ì¡´ì˜ *ì†ì„±*ê°’ì´ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ë‚´ê°€ ì›í•˜ëŠ” íŒŒë€ìƒ‰
ìš°ì£¼ì„ ì´ ì™¼ìª½ìœ¼ë¡œ ë¯¸ì‚¬ì¼ ì˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì²­ë¡ìƒ‰ ìš°ì£¼ì„  ì¦‰, ê¸°ë³¸ì ìœ¼ë¡œ
ë§Œë“¤ì–´ì§€ëŠ” ìš°ì£¼ì„ ,ì´ ìƒˆë¡­ê²Œ ë§Œë“¤ì–´ì ¸ ì™¼ìª½ìœ¼ë¡œ ë¯¸ì‚¬ì¼ ì˜ëŠ” ê²ƒì´ë‹¤.

ì •ë¦¬í•´ë³´ìë©´, ìƒì†ìœ¼ë¡œ ë™ì ì¸ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ê²½ìš° *ê¸°ì¡´ ìƒíƒœ*ê°€ ìœ ì§€ ë˜ì§€
ì•ŠëŠ”ë‹¤ëŠ” ì ì´ ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ìƒì†ì´ ì•„ë‹Œ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ í•´ë‹¹ ê¸°ëŠ¥ì„
êµ¬í˜„í•´ì•¼í•œë‹¤.

### Composite (êµ¬ì„± í˜¹ì€ í¬í•¨) ë°©ë²•ì„ í†µí•´ êµ¬í˜„
êµ¬ì„±ì„ í†µí•œ ê¸°ëŠ¥ì¶”ê°€ë¥¼ í•˜ëŠ” ë°©ë²•ì€ *ìƒì†*ì„ í†µí•œ ë°©ë²•ê³¼ ë‹¬ë¦¬, ë¯¸ì‚¬ì¼ ë‚´ ìš°ì£¼ì„ ì„
ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°ë¥¼ ë©¤ë²„ë¡œ í¬í•¨í•˜ëŠ” ë°©ë²•ì´ë‹¤.

```cpp
#include <iostream>
using namespace std;

class Space {
  int color;
  int speed;
public:
  void Shoot() { cout << "Space ---------- target" << endl; }
};

// ì™¼ìª½ ë¯¸ì‚¬ì¼
class LeftMissile
{
	// spaceë¥¼ í¬í•¨í•´ êµ¬ì„±í•˜ëŠ” ë°©ì‹
	Space* space;
public:
	// ìƒì„±ìë¥¼ í†µí•œ ì¶”ê°€
	LeftMissile(Space* s) : space(s) {}

  void Shoot()
  {
    space->Shoot(); // ê¸°ì¡´ ê¸°ëŠ¥ ìˆ˜í–‰.
    cout << "Left Missile : >>>>>>>>" << endl;
  }
};

int main() {
  Space s;
  s.Shoot();

	LeftMissile lm(&s);
	lm.Shoot();
}
```

ìœ„ì˜ ë°©ë²•ê³¼ ê°™ì´, `LeftMissile`ì„ ìƒì„±í•  ë•Œ, ê¸°ì¡´ spaceë¥¼ ë„˜ê²¨ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜
ìˆë‹¤. ì´ë ‡ê²Œ êµ¬í˜„í•  ê²½ìš°, ê¸°ì¡´ì˜ ê°ì²´ì˜ ê¸°ëŠ¥ì€ ê·¸ëŒ€ë¡œ ìˆ˜í–‰í•˜ê³ , ìƒˆë¡œìš´ ê¸°ëŠ¥ì„
ì¶”ê°€í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

ìƒì†ê³¼ ë‹¬ë¦¬, ìš°ì£¼ì„ ì˜ ê°ì²´ëŠ” í•˜ë‚˜ë°–ì— ì—†ê³ , ì‹¤ì œ í•˜ë‚˜ì˜ ìš°ì£¼ì„ ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡
êµ¬í˜„ë˜ëŠ” ì ì—ì„œ ì°¨ì´ê°€ ìˆë‹¤.

êµ¬ì„±ì„ í†µí•œ ê¸°ëŠ¥ ì¶”ê°€ë°©ì‹ì€ ì‹¤í–‰ì‹œê°„ì— ì¶”ê°€ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ìœ¼ë¡œ
ì‚¬ìš©ëœë‹¤. ë³´í†µ ìƒì†ì„ í†µí•œ ê¸°ëŠ¥ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì€ *template method*ì—ì„œ ë§ì´
ì‚¬ìš©ë˜ê³ , ì¼ë°˜ì ìœ¼ë¡œëŠ” ìƒì†ë³´ë‹¤ ìœ ì—°í•œ êµ¬ì„±ì„ í†µí•œ ë°©ë²•ì„ ë§ì´ ì‚¬ìš©í•œë‹¤.

ìœ„ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ *Right* ë¯¸ì‚¬ì¼ë„ ì¶”ê°€í•´ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. Right ë¯¸ì‚¬ì¼ì„
ì¶”ê°€í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```cpp
...

// ì˜¤ë¥¸ìª½ ë¯¸ì‚¬ì¼
class RightMissile
{
	// spaceë¥¼ í¬í•¨í•´ êµ¬ì„±í•˜ëŠ” ë°©ì‹
	Space* space;
public:
	// ìƒì„±ìë¥¼ í†µí•œ ì¶”ê°€
	RightMissile(Space* s) : space(s) {}

  void Shoot()
  {
    space->Shoot(); // ê¸°ì¡´ ê¸°ëŠ¥ ìˆ˜í–‰.
    cout << "Right Missile : >>>>>>>>" << endl;
  }
};

int main() {
  Space s;
  s.Shoot();

	LeftMissile lm(&s);
	lm.Shoot();

	RightMissile rm(&s);
	rm.Shoot();
}
```

ìœ„ì™€ ê°™ì´ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´, *Right* ë¯¸ì‚¬ì¼ë„ ë¬¸ì œì—†ì´ ë™ì‘í•œë‹¤. ê·¸ëŸ¼ ê·¸ëƒ¥
Composite íŒ¨í„´ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ë˜ì§€? ì™œ *ë°ì½”ë ˆì´í„° íŒ¨í„´*ì„ ì ìš©í•´ì•¼ë˜ëŠ”ê°€? ì˜ë¬¸ì„
ê°€ì§ˆ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  *Decorator* íŒ¨í„´ì€ ë°°ìš°ì§€ë„ ì•ŠëŠ”ë°, ì™œ ì—¬ê¸°ì„œ ì´ê±¸
ì„¤ëª…í•˜ëŠ”ê±°ì§€? ë¼ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤.

*ì—¬ê¸°ì„œ í•˜ë‚˜ ë” ë‚˜ì•„ê°€ ìƒê°í•´ë³´ì*

ë§Œì•½ ìš°ì£¼ì„ ì˜ ë ˆë²¨ì´ ì—…ê·¸ë ˆì´ë“œ ë  ë•Œ, ì™¼ìª½ ë¯¸ì‚¬ì¼ì„ ì¥ì°©í•˜ëŠ” ê²ƒê³¼ ì˜¤ë¥¸ìª½
ë¯¸ì‚¬ì¼ì„ ì¥ì°©í•˜ëŠ”ê²Œ ë™ì‹œì— ì¼ì–´ë‚˜ê²Œ ë§Œë“¤ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í•˜ëŠ”ê°€?

ì¦‰, ìœ„ì˜ ì½”ë“œëŠ” ë ˆë²¨ì´ ì˜¬ë¼ê°ˆ ë•Œ ë§ˆë‹¤ ì™¼ìª½, ì˜¤ë¥¸ìª½ ìˆœì°¨ì ìœ¼ë¡œ ì¥ì°©í•˜ëŠ”ê²Œ ê°€ëŠ¥í•œ
ì½”ë“œì´ë‹¤. ë§Œì•½ *ë™ì‹œì—* ì¥ì°©í•´ì•¼ëœë‹¤ê³  ê²Œì„ì„ êµ¬ì„±í•˜ë©´, í•´ë‹¹ ì½”ë“œëŠ” ì •ìƒì ìœ¼ë¡œ
ë™ì‘í•  ìˆ˜ ìˆì„ê¹Œ?

ë¶ˆê°€ëŠ¥í•˜ë‹¤. êµ¬ì¡°ë¥¼ ì¢€ ë” ë³€ê²½í•´ì•¼í•  í•„ìš”ê°€ ìˆë‹¤.
